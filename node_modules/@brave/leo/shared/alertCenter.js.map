{"version":3,"file":"alertCenter.js","sources":["../src/components/alert/alertCenter.svelte"],"sourcesContent":["<script lang=\"ts\" context=\"module\">\n  import type { AlertMode, AlertType } from './alert.svelte'\n  import { writable } from 'svelte/store'\n\n  /**\n   * This is a workaround for TS since we don't know what props Action may have.\n   * Additionally, Button has two generic type params, which also seems to\n   * contribute to the TS error.\n   */\n  const ButtonComponent: ComponentType<SvelteComponent> = Button;\n\n  type Action = {\n    kind?: ButtonKind\n    isDisabled?: boolean,\n    isLoading?: boolean,\n    component?: ComponentType<SvelteComponent>,\n    action: (alert: AlertInfo) => void\n  } & ({\n    text: string\n    icon?: IconName\n  } | {\n    icon: IconName\n    text?: string\n  })\n\n  export interface AlertOptions {\n    mode: AlertMode\n    type: AlertType\n    content: string\n    title?: string\n    icon?: IconName\n    component?: ComponentType<SvelteComponent>\n    actions: Action[]\n  }\n\n  let nextId = 0\n  class AlertInfo {\n    id = ++nextId\n\n    mode: AlertMode\n    type: AlertType\n    content: string\n    title?: string\n    icon?: IconName\n    component?: ComponentType<SvelteComponent>\n    actions: Action[] = []\n\n    duration?: number\n    canDismiss?: boolean\n    #timeout: NodeJS.Timeout\n\n    constructor(options: AlertOptions, duration?: number, canDismiss?: boolean) {\n      Object.assign(this, options)\n      this.actions = this.actions ?? []\n\n      this.duration = duration\n      this.canDismiss = canDismiss\n      this.resumeDismiss()\n    }\n\n    pauseDismiss() {\n      clearTimeout(this.#timeout)\n    }\n\n    resumeDismiss() {\n      if (!this.duration) return\n      this.#timeout = setTimeout(() => this.dismiss(), this.duration)\n    }\n\n    dismiss() {\n      alerts.update((a) => a.filter((a) => a !== this))\n    }\n\n    updateAlert(update: Partial<AlertOptions>) {\n      Object.assign(this, update)\n\n      // Trigger a rerender\n      alerts.update(a => [...a])\n    }\n  }\n\n  const alerts = writable<AlertInfo[]>([])\n\n  export const showAlert = (options: AlertOptions, duration = 2000, canDismiss = true) => {\n    const info = new AlertInfo(options, duration, canDismiss)\n    alerts.update((a) => [...a, info])\n    return info\n  }\n\n  const transitionOptions = { y: -64, duration: 120 }\n</script>\n\n<script lang=\"ts\">\n  import Alert from './alert.svelte'\n  import Button from '../button/button.svelte'\n  import type { ButtonKind } from '../button/props'\n  import { fly } from 'svelte/transition'\n  import type { ComponentType, SvelteComponent } from 'svelte'\n  import type { IconName } from '../../../icons/meta'\n  import Icon from '../icon/icon.svelte'\n\n  export let position: `${'top' | 'bottom'}-${'left' | 'right' | 'center'}` =\n    'top-center'\n  $: style = `${position.includes('right') ? 'right' : 'left'}: ${\n    position.includes('center') ? 'calc(50% - (var(--width) / 2))' : '0'\n  }; ${position.includes('top') ? 'top' : 'bottom'}: 0`\n</script>\n\n<div class=\"leo-alert-center\" {style}>\n  {#each $alerts as alert (alert.id)}\n    <div\n      class=\"alert-container\"\n      transition:fly={transitionOptions}\n      on:mouseenter={() => alert.pauseDismiss()}\n      on:mouseleave={() => alert.resumeDismiss()}\n    >\n      <svelte:component this={alert.component || Alert} {...alert} hasActions={alert.actions.length > 0} hasContentAfter={alert.canDismiss} isToast>\n        <div slot=\"title\">\n          {alert.title}\n        </div>\n        <svelte:fragment slot='content-after'>\n          {#if alert.canDismiss}\n            <Button kind=\"plain-faint\" fab onClick={() => alert.dismiss()}>\n              <Icon name=\"close\" />\n            </Button>\n          {/if}\n        </svelte:fragment>\n        {alert.content}\n        <div slot=\"actions\">\n          {#each alert.actions as action}\n            <svelte:component\n              this={action.component || ButtonComponent}\n              size={alert.mode === \"full\" ? \"medium\" : \"small\"}\n              fab={action.icon && !action.text}\n              kind={action.kind || 'filled'}\n              onClick={() => action.action(alert)}\n              {...action}\n            >\n              {#if action.icon && !action.text}\n                <Icon name={action.icon} />\n              {:else}\n                {action.text}\n              {/if}\n              <div slot=\"icon-after\" hidden={!action.text || !action.icon}>\n                <Icon name={action.icon} />\n              </div>\n            </svelte:component>\n          {/each}\n        </div>\n      </svelte:component>\n    </div>\n  {/each}\n</div>\n\n<style lang=\"scss\">\n  .leo-alert-center {\n    --width: var(--leo-alert-center-width, min(540px, 100vw));\n    z-index: var(--leo-alert-center-z-index, 1000);\n    position: var(--leo-alert-center-position, fixed);\n    width: var(--width);\n\n    padding: var(--leo-spacing-m);\n\n    display: flex;\n    flex-direction: column;\n    gap: var(--leo-spacing-m);\n  }\n</style>\n"],"names":["this"],"mappings":"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"}