{"version":3,"file":"toggle.js","sources":["../src/components/toggle/toggle.svelte"],"sourcesContent":["<script context=\"module\" lang=\"ts\">\n  export const sizes = ['small', 'medium'] as const\n  export type Sizes = (typeof sizes)[number]\n\n  const DRAG_AMOUNT_TO_CHANGE = 10\n</script>\n\n<script lang=\"ts\">\n  export let checked: boolean = false\n  export let disabled: boolean = false\n  export let size: Sizes = 'medium'\n  export let onChange: (detail: { checked: boolean }) => void = undefined\n\n  let thumb: HTMLElement\n\n  let handledClick = false\n  let dragStartX: number | undefined\n  let dragOffsetX: number = 0\n\n  const change = (newValue?: boolean) => {\n    if (newValue === undefined) newValue = !checked\n    checked = newValue\n    onChange?.({ checked: newValue })\n  }\n\n  function finishDrag() {\n    // If we didn't receive a mouse down, there's nothing to do.\n    if (dragStartX === undefined) return\n\n    // If we didn't drag just toggle the state.\n    if (dragOffsetX === 0) {\n      change()\n    } else {\n      if (dragOffsetX > DRAG_AMOUNT_TO_CHANGE && !checked) change(true)\n      if (dragOffsetX < -DRAG_AMOUNT_TO_CHANGE && checked) change(false)\n    }\n\n    // Reset the dragging attributes.\n    dragStartX = undefined\n    dragOffsetX = 0\n  }\n</script>\n\n<svelte:window\n  on:mouseup={finishDrag}\n  on:mousemove={(e) => {\n    if (dragStartX === undefined) return\n    dragOffsetX = e.clientX - dragStartX\n\n    if (document.documentElement.dir === 'rtl') dragOffsetX = -dragOffsetX\n\n    // The mouse was released but we didn't get a mouseup event\n    if (e.buttons === 0) {\n      finishDrag()\n    }\n  }}\n/>\n\n<label class={`leo-toggle size-${size}`}>\n  <button\n    on:mousedown={(e) => {\n      if (disabled || e.button !== 0) return\n\n      handledClick = true\n      dragStartX = e.clientX\n    }}\n    on:click|stopPropagation={(e) => {\n      if (handledClick || disabled) {\n        handledClick = false\n        return\n      }\n\n      change()\n    }}\n    {disabled}\n    role=\"switch\"\n    aria-checked={checked}\n  >\n    <div\n      bind:this={thumb}\n      class=\"thumb\"\n      class:dragging={!!dragOffsetX}\n      aria-hidden=\"true\"\n      style:--drag-offset=\"{dragOffsetX}px\"\n    >\n      <div class=\"on-icon\">\n        <slot name=\"on-icon\" />\n      </div>\n    </div>\n  </button>\n  <slot {checked} />\n</label>\n\n<style lang=\"scss\">\n  :global(:root) {\n    --leo-direction: 1;\n  }\n\n  :global(:root[dir='rtl']) {\n    --leo-direction: -1;\n  }\n\n  :host {\n    display: inline-block;\n  }\n\n  .leo-toggle {\n    --foreground-color: black;\n\n    --duration: var(--leo-toggle-transition-duration, 0.12s);\n    @media (prefers-reduced-motion) {\n      --duration: 0;\n    }\n\n    --icon-size: var(--leo-icon-size, 20px);\n    --width: var(--leo-toggle-width, 52px);\n    --height: var(--leo-toggle-height, 32px);\n    --padding: var(--leo-toggle-padding, var(--leo-spacing-s));\n    --checked-color: var(\n      --leo-toggle-checked-color,\n      var(--leo-color-schemes-primary)\n    );\n    --unchecked-color: var(\n      --leo-toggle-unchecked-color,\n      var(--leo-color-neutral-30)\n    );\n    --thumb-color: var(\n      --leo-toggle-thumb-color,\n      var(--leo-color-schemes-on-primary)\n    );\n    --thumb-disabled-color: var(--leo-toggle-thumb-disabled-color, white);\n    --label-gap: var(--leo-toggle-label-gap, var(--leo-spacing-s));\n    --label-flex-direction: var(--leo-toggle-label-flex-direction, row);\n\n    &.size-small {\n      --width: 40px;\n      --height: 24px;\n      --icon-size: var(--leo-icon-size, 12px);\n    }\n\n    @theme (dark) {\n      --foreground-color: white;\n    }\n\n    display: flex;\n    align-items: center;\n    flex-direction: var(--label-flex-direction);\n    gap: var(--label-gap);\n    cursor: pointer;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .leo-toggle button {\n    --leo-icon-size: var(--icon-size);\n\n    all: unset;\n    background: var(--unchecked-color);\n    width: calc(var(--width) - 2 * var(--padding));\n    height: calc(var(--height) - 2 * var(--padding));\n    border-radius: var(--leo-radius-full);\n    padding: var(--padding);\n    transition: background-color var(--duration) ease-in-out;\n    flex-shrink: 0;\n\n    &:disabled {\n      opacity: 0.5;\n\n      > .thumb {\n        background: var(--thumb-disabled-color);\n      }\n    }\n\n    &:hover:not(:disabled) {\n      --hover-bg: var(--unchecked-color);\n\n      &[aria-checked='true'] {\n        --hover-bg: var(--checked-color);\n      }\n\n      background: color-mix(\n        in srgb,\n        var(--hover-bg) 80%,\n        var(--foreground-color)\n      );\n    }\n\n    &[aria-checked=\"false\"] .thumb {\n      opacity: 0.5;\n    }\n\n    & .thumb {\n      --unchecked-thumb-offset: 0px;\n      --checked-thumb-offset: calc(var(--width) - var(--height));\n      --thumb-offset: var(--unchecked-thumb-offset);\n      --drag-offset: 0;\n      --thumb-position: calc(\n        max(\n            min(\n              var(--checked-thumb-offset),\n              calc(var(--thumb-offset) + var(--drag-offset))\n            ),\n            var(--unchecked-thumb-offset)\n          ) * var(--leo-direction)\n      );\n\n      height: 100%;\n      aspect-ratio: 1/1;\n      background: var(--thumb-color);\n      border-radius: var(--leo-radius-full);\n      transition:\n        transform var(--duration) ease-in-out,\n        color var(--duration) ease-in-out,\n        opacity var(--duration) ease-in-out;\n\n      transform: translate(var(--thumb-position), 0);\n\n      &.dragging {\n        transition:\n          transform 0s ease-in-out,\n          color var(--duration) ease-in-out;\n      }\n\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      .on-icon {\n        transition: opacity var(--duration) ease-in-out;\n        display: flex;\n        opacity: 0;\n      }\n    }\n\n    &[aria-checked='true'] {\n      background: var(--checked-color);\n\n      .thumb {\n        --thumb-offset: var(--checked-thumb-offset);\n        color: var(--checked-color);\n\n        .on-icon {\n          opacity: 1;\n        }\n      }\n    }\n  }\n</style>\n"],"names":[],"mappings":"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"}