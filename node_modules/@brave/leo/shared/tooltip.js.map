{"version":3,"file":"tooltip.js","sources":["../src/components/tooltip/tooltip.svelte"],"sourcesContent":["<script lang=\"ts\" context=\"module\">\n  export const modes = ['hero', 'info', 'default', 'mini'] as const\n  export type Mode = (typeof modes)[number]\n</script>\n\n<script lang=\"ts\">\n  import type { MiddlewareData, Placement, Strategy } from '@floating-ui/dom'\n  import { arrow as arrowMiddleware } from '@floating-ui/dom'\n  import { fade } from 'svelte/transition'\n  import Floating from '../floating/floating.svelte'\n\n  export let text: string | undefined = undefined\n\n  export let placement: Placement = 'top'\n  export let fallbackPlacements: Placement[] = undefined\n  export let positionStrategy: Strategy = undefined\n  export let flip: boolean = true\n  export let shift: number | undefined = 8\n  export let offset: number = 8\n  export let mode: Mode = 'mini'\n\n  /** The length of time the tooltip is open in ms after mouse leave of\n   * the trigger or tooltip */\n  export let mouseleaveTimeout: number = 150\n\n  /* Whether the tooltip is currently visible */\n  export let visible: boolean | undefined = undefined\n\n  /** The length of time in ms the tooltip element takes to fade\n   * after the users mouse leaves the trigger or tooltip*/\n  export let fadeDuration: number = 0\n\n  /** Called when the visibility of the tooltip is changed */\n  export let onVisibilityChange: (detail: { visible: boolean }) => void =\n    undefined\n\n  // Note: This is separate from the |visible| flag because we want to handle\n  // controlled and uncontrolled states for this component.\n  $: visibleInternal = visible ?? false\n\n  let tooltip: HTMLElement\n  let arrow: HTMLElement\n  let trigger: HTMLElement\n\n  let arrowPlacement: string | undefined = undefined\n\n  function positionArrow(e: {\n    middlewareData: MiddlewareData\n    placement: Placement\n  }) {\n    if (!e.middlewareData.arrow) return\n\n    const { x: arrowX, y: arrowY } = e.middlewareData.arrow as {\n      x?: number\n      y?: number\n    }\n\n    arrowPlacement = e.placement.split('-')[0]\n\n    const staticSide =\n      {\n        top: 'bottom',\n        right: 'left',\n        bottom: 'top',\n        left: 'right'\n      }[arrowPlacement] ?? 'top'\n\n    if (!arrow) return\n\n    Object.assign(arrow.style, {\n      left: arrowX != null ? `${arrowX}px` : '',\n      top: arrowY != null ? `${arrowY}px` : '',\n      right: '',\n      bottom: '',\n      [staticSide]: '-4px'\n    })\n  }\n\n  let tooltipHovered = false\n  let triggerHovered = false\n\n  const handleMouseleave = (() => {\n    let timeout: NodeJS.Timeout\n\n    return () => {\n      clearTimeout(timeout)\n      timeout = setTimeout(() => {\n        if (!triggerHovered && !tooltipHovered) {\n          setVisible(false)\n        }\n      }, mouseleaveTimeout)\n    }\n  })()\n\n  const handleTriggerMouseenter = () => {\n    triggerHovered = true\n    setVisible(true)\n  }\n\n  const handleTriggerMouseleave = () => {\n    triggerHovered = false\n    handleMouseleave()\n  }\n\n  const handleTooltipMouseleave = () => {\n    tooltipHovered = false\n    handleMouseleave()\n  }\n\n  function setVisible(newVisible: boolean) {\n    if (newVisible === visible) return\n\n    if (visible === undefined) visibleInternal = newVisible\n    onVisibilityChange?.({ visible: newVisible })\n  }\n</script>\n\n<div class=\"leo-tooltip\">\n  {#key visibleInternal}\n    <Floating\n      target={trigger}\n      {flip}\n      {offset}\n      {placement}\n      {fallbackPlacements}\n      {positionStrategy}\n      {shift}\n      autoUpdate\n      onMouseLeave={handleTooltipMouseleave}\n      onMouseEnter={() => (tooltipHovered = true)}\n      middleware={[arrowMiddleware({ padding: 0, element: arrow })]}\n      onComputedPosition={positionArrow}\n    >\n      {#if $$slots.content || text}\n        <div\n          class=\"tooltip\"\n          class:hero={mode === 'hero'}\n          class:info={mode === 'info'}\n          class:mini={mode === 'mini'}\n          transition:fade={{ duration: fadeDuration }}\n          class:default={mode === 'default' || !mode}\n          hidden={!visibleInternal}\n          bind:this={tooltip}\n        >\n          <slot name=\"content\">\n            {text}\n          </slot>\n          <div class={`arrow ${arrowPlacement}`} bind:this={arrow} />\n        </div>\n      {/if}\n    </Floating>\n  {/key}\n\n  <div\n    on:focusin={() => setVisible(true)}\n    on:focusout={() => setVisible(false)}\n    on:mouseenter={handleTriggerMouseenter}\n    on:mouseleave={handleTriggerMouseleave}\n    class=\"trigger\"\n    bind:this={trigger}\n  >\n    <slot />\n  </div>\n</div>\n\n<style lang=\"scss\">\n  :host {\n    display: inline-block;\n    width: fit-content;\n\n    & > .leo-tooltip {\n      width: 100%;\n    }\n  }\n\n  .leo-tooltip {\n    --background: var(\n      --leo-tooltip-background,\n      var(--leo-color-container-background)\n    );\n    --text: var(--leo-tooltip-text-color, var(--leo-color-text-primary));\n    --shadow: var(--leo-tooltip-shadow, var(--leo-effect-elevation-03));\n    --padding: var(--leo-tooltip-padding, var(--leo-spacing-xl));\n    --radius: var(--leo-radius-m);\n    --border-color: transparent;\n    --border-width: 0px;\n\n    width: fit-content;\n  }\n\n  .leo-tooltip .tooltip {\n    background: var(--background);\n    color: var(--text);\n    box-shadow: var(--shadow);\n    padding: var(--padding);\n    border-radius: var(--radius);\n    border: var(--border-width) solid var(--border-color);\n    font: var(--leo-font-default-regular);\n  }\n\n  .leo-tooltip .tooltip {\n    & .arrow {\n      position: absolute;\n      background: var(--background);\n      width: 8px;\n      height: 8px;\n      transform: rotate(45deg);\n      z-index: -1;\n    }\n\n    &.default .arrow {\n      border: var(--border-width) solid var(--border-color);\n      z-index: 10;\n      &.left,\n      &.bottom {\n        border-bottom: 0;\n      }\n\n      &.right,\n      &.bottom {\n        border-right: 0;\n      }\n\n      &.right,\n      &.top {\n        border-top: 0;\n      }\n\n      &.left,\n      &.top {\n        border-left: 0;\n      }\n    }\n  }\n\n  .leo-tooltip .tooltip.hero {\n    --background: var(--leo-gradient-hero);\n    --text: var(--leo-color-container-background);\n  }\n\n  .leo-tooltip .tooltip.info {\n    --background: var(--leo-color-button-background);\n    --text: var(--leo-color-container-background);\n  }\n\n  .leo-tooltip .tooltip.mini {\n    --background: var(--leo-color-neutral-10);\n    @theme dark {\n      --background: var(--leo-color-neutral-20);\n    }\n\n    --text: var(--leo-color-text-primary);\n    --padding: var(--leo-spacing-s) 6px;\n    --shadow: var(--leo-effect-elevation-01);\n    --radius: 2px;\n\n    font: var(--leo-font-x-small-regular);\n  }\n\n  .leo-tooltip .tooltip.default {\n    --border-color: var(--leo-color-divider-subtle);\n    --border-width: 1px;\n  }\n</style>\n"],"names":["arrowMiddleware"],"mappings":"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"}