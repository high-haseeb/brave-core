{"version":3,"file":"dialog.js","sources":["../src/components/dialog/dialog.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import type { SvelteHTMLElements } from 'svelte/elements'\n  import { scale } from 'svelte/transition'\n  import Button from '../button/button.svelte'\n  import Icon from '../icon/icon.svelte'\n\n  type DialogSizes = 'mobile' | 'normal'\n\n  type $$Props = Omit<Partial<SvelteHTMLElements['dialog']>, 'open'> & {\n    isOpen?: boolean\n    modal?: boolean\n    showClose?: boolean\n    showBack?: boolean\n    size?: DialogSizes\n    escapeCloses?: boolean\n    backdropClickCloses?: boolean\n    animate?: boolean\n    onClose?: () => void\n    onBack?: () => void\n  }\n\n  export let isOpen = false\n  export let modal = true\n  export let showClose = false\n  export let showBack = false\n  export let size: DialogSizes = 'normal'\n  export let escapeCloses = true\n  export let backdropClickCloses = true\n  export let animate = true\n\n  export let onClose: () => void = undefined\n  export let onBack: () => void = undefined\n\n  let dialog: HTMLDialogElement\n  $: {\n    if (isOpen && !dialog?.open && dialog?.isConnected) dialog?.showModal()\n  }\n\n  const hasHeader = showBack || $$slots.title || $$slots.subtitle\n\n  const close = () => {\n    isOpen = false\n    onClose?.()\n  }\n</script>\n\n{#if isOpen}\n  <dialog\n    transition:scale={{ duration: animate ? 60 : 0, start: 0.8 }}\n    {...$$restProps}\n    class=\"leo-dialog\"\n    class:mobile={size === 'mobile'}\n    class:modal\n    class:hasHeader\n    class:hasActions={$$slots.actions}\n    bind:this={dialog}\n    on:close={close}\n    on:cancel={(e) => {\n      // We handle the modal being opened by adding/removing from the DOM - this\n      // let's the animations work properly.\n      e.preventDefault()\n\n      if (escapeCloses) close()\n    }}\n  >\n    {#if showClose}\n      <div class=\"close-button\">\n        <Button kind=\"plain-faint\" onClick={close}>\n          <Icon name=\"close\" />\n        </Button>\n      </div>\n    {/if}\n    {#if hasHeader}\n      <header>\n        {#if showBack || $$slots.title}\n          <div class=\"title-row\">\n            {#if showBack}\n              <div class=\"back-button\">\n                <Button kind=\"plain-faint\" onClick={onBack}>\n                  <Icon name=\"arrow-left\" />\n                </Button>\n              </div>\n            {/if}\n            <div class=\"title\">\n              <slot name=\"title\" />\n            </div>\n          </div>\n        {/if}\n        {#if $$slots.subtitle}\n          <div class=\"subtitle\">\n            <slot name=\"subtitle\" />\n          </div>\n        {/if}\n      </header>\n    {/if}\n    <div class=\"body\">\n      <slot />\n    </div>\n    {#if $$slots.actions}\n      <div class=\"actions\">\n        <slot name=\"actions\" />\n      </div>\n    {/if}\n  </dialog>\n{/if}\n\n<svelte:window\n  on:click|capture={(e) => {\n    if (!dialog || !isOpen || !backdropClickCloses) return\n\n    const rect = dialog.getBoundingClientRect()\n    const clickedOutside =\n      e.clientX < rect.x ||\n      e.clientY < rect.y ||\n      e.clientX > rect.x + rect.width ||\n      e.clientY > rect.y + rect.height\n    if (clickedOutside) {\n      close()\n    }\n  }}\n/>\n\n<style lang=\"scss\">\n  .leo-dialog {\n    --padding: var(--leo-dialog-padding, var(--leo-spacing-4xl));\n    --border-radius: var(--leo-dialog-border-radius, var(--leo-radius-xl));\n    --background: var(\n      --leo-dialog-background,\n      var(--leo-color-container-background)\n    );\n    --color: var(--leo-dialog-color, var(--leo-color-text-primary));\n\n    --backdrop-background: var(\n      --leo-dialog-backdrop-background,\n      rgba(0, 0, 0, 0.1)\n    );\n    --backdrop-filter: var(--leo-dialog-backdrop-filter);\n\n    position: fixed;\n    margin: auto;\n    border: none;\n    display: grid;\n\n    width: var(--leo-dialog-width, 500px);\n    max-width: calc(100% - var(--leo-spacing-m) * 2);\n\n    border-radius: var(--border-radius);\n\n    color: var(--color);\n\n    padding: 0;\n    background: transparent;\n    box-shadow: var(--leo-effect-elevation-05);\n\n    &::backdrop {\n      background: var(--backdrop-background);\n      backdrop-filter: var(--backdrop-filter);\n    }\n  }\n\n  .leo-dialog.hasHeader {\n    grid-template-rows: auto 1fr;\n  }\n\n  .leo-dialog.hasActions {\n    grid-template-rows: 1fr auto;\n  }\n\n  .leo-dialog.hasHeader.hasActions {\n    grid-template-rows: auto 1fr auto;\n  }\n\n  .leo-dialog.mobile {\n    --padding: var(--leo-dialog-padding, var(--leo-spacing-2xl));\n    width: var(--leo-dialog-width, 374px);\n  }\n\n  .leo-dialog:not(.modal) {\n    box-shadow: var(--leo-effect-elevation-04);\n    border: 1px solid var(--leo-color-divider-subtle);\n    &::backdrop {\n      display: none;\n    }\n  }\n\n  .leo-dialog header {\n    background: var(--background);\n    padding: var(--padding);\n  }\n\n  .leo-dialog .title {\n    font: var(--leo-font-heading-h2);\n  }\n\n  .leo-dialog .close-button {\n    position: absolute;\n    inset-inline-end: var(--leo-spacing-xl);\n    top: var(--leo-spacing-xl);\n  }\n\n  .leo-dialog {\n    .close-button,\n    .back-button {\n      --leo-button-padding: var(--leo-spacing-s);\n\n      flex: 0;\n    }\n  }\n\n  .leo-dialog .subtitle {\n    margin-bottom: var(--leo-spacing-xl);\n    font: var(--leo-font-heading-h4);\n  }\n\n  .leo-dialog .body {\n    overflow-y: auto;\n    background: var(--background);\n    color: var(--leo-color-text-secondary);\n    font: var(--leo-font-default-regular);\n    padding: var(--padding);\n  }\n\n  .leo-dialog.hasHeader .body {\n    padding-top: 0;\n  }\n\n  .leo-dialog.hasActions .body {\n    padding-bottom: 0;\n  }\n\n  .leo-dialog .actions {\n    background: var(--background);\n    padding: var(--padding);\n  }\n\n  /** The below :global selectors are so that Svelte doesn't remove the classes\n    * at compile time (as the slotted content is put in via the parent).\n    * Note: We have to handle the case where we're in a web component (via the\n    * ::slotted selector) and the case where we're in a Svelte component (via\n    * the div[slot='actions'] selector).\n    *\n    * The :global selector doesn't seem to be able to handle nesting, so we have\n    * two separate selectors for mobile & non-mobile layouts */\n  :global .leo-dialog.mobile .actions ::slotted(*),\n  :global .leo-dialog.mobile .actions div[slot='actions'] {\n    flex-direction: column;\n    align-items: stretch;\n    justify-content: end;\n  }\n\n  :global .leo-dialog .actions ::slotted(*),\n  :global .leo-dialog div[slot='actions'] {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: stretch;\n    gap: var(--leo-spacing-xl);\n  }\n\n  .leo-dialog .title-row {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: stretch;\n    gap: var(--leo-spacing-l);\n  }\n</style>\n"],"names":[],"mappings":"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"}