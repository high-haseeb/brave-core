{"version":3,"file":"58debee4.js","sources":["../node_modules/svelte/src/runtime/store/index.js","../src/svelteDirectives/isSSR.ts","../src/components/icon/icon.svelte"],"sourcesContent":["import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n",null,"<script context=\"module\" lang=\"ts\">\n  import isSSR from '../../svelteDirectives/isSSR'\n  import { writable } from 'svelte/store'\n\n  let lastIconBasePath = '/icons'\n  let iconBasePath = writable(lastIconBasePath)\n\n  export const setIconBasePath = (basePath: string) => {\n    lastIconBasePath = basePath\n    iconBasePath.set(basePath)\n  }\n\n  const getIconUrl = (basePath: string, name: string) =>\n    `${basePath}/${name}.svg`\n\n  // Not actually used by the component, but used to preload SVGs.\n  const svgCache = {}\n  export const preloadIcon = (name: IconName) => {\n    // Note: We do this in a |requestIdleCallback| because we want to do this as\n    // soon as possible, but we want to make sure the consumer has a chance to\n    // call setIconBasePath before we go and preload the icons (or we'll get a\n    // 404).\n    if (isSSR) return\n\n    window.requestIdleCallback?.(() => {\n      const image = new Image()\n      image.src = getIconUrl(lastIconBasePath, name)\n      image.onerror = () => delete svgCache[image.src]\n\n      // Store the image in our cache, so it isn't garbage collected.\n      svgCache[image.src] = image\n    })\n  }\n</script>\n\n<script lang=\"ts\">\n  import type { IconName } from '@brave/leo/icons/meta'\n  export let name: IconName = undefined\n  export let forceColor: boolean = false\n  export let title: string = undefined\n  $: hasColor =\n    name?.endsWith('-color') || name?.startsWith('country-') || forceColor\n</script>\n\n<div class=\"leoIcon\" {title}>\n  <slot>\n    {#if name}\n      <div\n        class=\"icon\"\n        class:color={hasColor}\n        style:--icon-url={`url('${getIconUrl($iconBasePath, name)}')`}\n      />\n    {/if}\n  </slot>\n</div>\n\n<style lang=\"scss\">\n  .leoIcon {\n    --icon-width: var(--leo-icon-width, var(--leo-icon-size, 24px));\n    --icon-height: var(--leo-icon-height, var(--leo-icon-size, 24px));\n    --icon-color: var(--leo-icon-color, currentColor);\n\n    width: var(--icon-width);\n    height: var(--icon-height);\n    flex-shrink: 0;\n\n    & .icon,\n    :global svg {\n      width: 100%;\n      height: 100%;\n    }\n\n    /* Non color icons are set via a mask-image, so we can change the color\n     * by setting the background */\n    & .icon:not(.color) {\n      background: var(--icon-color);\n      -webkit-mask-image: var(--icon-url);\n      mask-image: var(--icon-url);\n      -webkit-mask-repeat: no-repeat;\n      mask-repeat: no-repeat;\n      -webkit-mask-position: center;\n      mask-position: center;\n    }\n\n    /* Color icons need to be set via a background rather than a mask so we\n     * don't remove the color */\n    & .icon.color {\n      background: var(--icon-url);\n      background-repeat: no-repeat;\n      background-position: center;\n    }\n  }\n</style>\n"],"names":[],"mappings":"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"}