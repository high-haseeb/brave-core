{"version":3,"file":"dropdown.js","sources":["../src/components/dropdown/dropdown.svelte"],"sourcesContent":["<script context=\"module\" lang=\"ts\">\n  import type { HTMLAttributes } from 'svelte/elements'\n  declare global {\n    namespace JSX {\n      interface IntrinsicElements {\n        'leo-option': HTMLAttributes<HTMLElement> & {\n          // Note: This should line up with Reacts key type, but we don't want\n          // to depend on React in this layer, so we just define it manually.\n          key?: string | number | null\n\n          value?: string\n          children?: any\n        }\n      }\n    }\n  }\n</script>\n\n<script lang=\"ts\">\n  import FormItem, { type Mode, type Size } from '../formItem/formItem.svelte'\n  import Icon from '../icon/icon.svelte'\n  import Menu, { type CloseEvent, type SelectItemEventDetail } from '../menu/menu.svelte'\n  import type { Strategy } from '@floating-ui/dom'\n\n  export let placeholder = ''\n  export let value: string | undefined = undefined\n  export let disabled = false\n  export let size: Size = 'normal'\n  export let required = false\n  export let mode: Mode = 'outline'\n  export let showErrors = false\n  export let positionStrategy: Strategy = 'absolute'\n\n  export let onChange: (detail: SelectItemEventDetail) => void = undefined\n  export let onClose: CloseEvent = undefined\n\n  let isOpen = false\n  let button: HTMLButtonElement\n  let dropdown: HTMLDivElement\n\n  function onClick(e) {\n    e.preventDefault()\n    isOpen = !isOpen\n  }\n</script>\n\n<div class=\"leo-dropdown\">\n  <div>\n    <FormItem\n      bind:disabled\n      bind:required\n      bind:size\n      bind:controlElement={dropdown}\n      renderLabel={$$slots.default}\n      {mode}\n      showFocusOutline={isOpen}\n      error={showErrors && $$slots.errors}\n    >\n      <slot name=\"label\" slot=\"label\" />\n      <slot name=\"left-icon\" slot=\"left-icon\" />\n      <button\n        bind:this={button}\n        class=\"click-target\"\n        {disabled}\n        on:click|stopPropagation={onClick}\n      >\n        {#if value !== undefined}\n          <slot name=\"value\" {value}>\n            <span class=\"value\">{value}</span>\n          </slot>\n        {:else}\n          <slot name=\"placeholder\">\n            <span class=\"placeholder\">{placeholder}</span>\n          </slot>\n        {/if}\n      </button>\n      <slot name=\"right-icon\" slot=\"right-icon\">\n        <div class=\"indicator\" class:open={isOpen}>\n          <Icon name=\"arrow-small-down\" />\n        </div>\n      </slot>\n    </FormItem>\n  </div>\n  <Menu\n    target={dropdown}\n    {positionStrategy}\n    bind:isOpen\n    bind:currentValue={value}\n    onSelectItem={onChange}\n    onClose={(e) => {\n      // Note: We cancel the |close| event if it was the dropdown that we\n      // clicked on, as that already toggles the dropdown. If we do both, the\n      // dropdown will instantly close and reopen.\n      if (e.originalEvent.composedPath().includes(dropdown) || onClose?.(e) === false) {\n        return false\n      } else if ('key' in e) {\n        // Focus the button when closing the dropdown via keyboard, so keyboard\n        // users can reopen it.\n        button.focus()\n      }\n    }}\n  >\n    <slot />\n  </Menu>\n</div>\n{#if showErrors}\n  <slot name=\"errors\" />\n{/if}\n\n<style lang=\"scss\">\n  :host {\n    display: inline-block;\n  }\n\n  .leo-dropdown {\n    cursor: pointer;\n    -webkit-tap-highlight-color: transparent;\n\n    button {\n      all: unset;\n    }\n  }\n\n  .leo-dropdown .click-target {\n    flex: 1;\n    pointer-events: none;\n  }\n</style>\n"],"names":[],"mappings":"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"}